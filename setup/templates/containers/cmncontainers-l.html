{% extends 'common/menu.html' %}
{% load getverbose %}

{% block title %} {{  MYCONTEXT.title }}{% endblock %}

{% block content_block %}
<br>
<div class="container-fluid">
    <form method="get">
        {% csrf_token %}
        <table class="table table-striped table-bordered table-sm">
            <td>
                <a href="{{ MYCONTEXT.create }}">
                    <button type="button" class="new-btn new-button">New Container</button>
                </a>
                <a href="/setup/companies_list/">
                    <button type="button" class="cancel-btn cancel-button">All Containers</button>
                </a>
                {% for field in search_form %}
                {{field.label_tag}}
                {{field}}
                {% endfor %}
                <input type="submit" class="btn btn-info" value="Search" name="list_filter" style="padding: 10px;
    font-size: 16px;
    line-height: 18px;">
            </td>
        </table>
    </form>
    <table class="table table-striped table-bordered table-sm">
        <thead class="bg-info">
        <tr>
            {% for field,attrs in listview_filed_dict.items %}
            <th>{{attrs}}</th>
            {% endfor %}
            <th>Actions</th>
        </tr>
        </thead>

        <tbody>

        {% for row in rows %}
        <tr>

            {% for field in listview_filed_dict %}
            {% if field == 'pc_name' %}
            <td><a href="?container_id={{row.pc_id}}">{{ row|get_instance_field_value:field }}</a></td>
            {% else %}
            <td>{{ row|get_instance_field_value:field }}</td>
            {% endif %}
            {% endfor %}
            <td>
                <a href="/setup/containers_update/{{ row.pc_id }}/">Edit</a>
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>

    {% if rows.paginator.num_pages > 1 %}
    <nav aria-label="Terms List Nav">
        <ul class="rows justify-content-center">
            {% if rows.has_previous %}
            <li class="page-item {% if not rows.has_previous %} disabled {% endif %}">
                <a href="?{% param_replace page=1 %}"
                   class="page-link">
                    &laquo; First</a>
            </li>
            <li class="page-item {% if not rows.has_previous %} disabled {% endif %}">
                <a href="?{% param_replace page=rows.previous_page_number %}"
                   class="page-link">
                    Previous</a>
            </li>
            {% endif %}

            <li class="page-item"><span class="current page-link">
                                Page {{ rows.number }} of {{ rows.paginator.num_pages }}.
                            </span></li>

            {% if rows.has_next %}
            <li class="page-item  {% if not rows.has_next %} disabled {% endif %}">
                <a href="?{% param_replace page=rows.next_page_number %}"
                   class="page-link">
                    Next</a></li>
            <li class="page-item {% if not rows.has_next %} disabled {% endif %}">
                <a href="?{% param_replace page=rows.paginator.num_pages %}"
                   class="page-link">
                    Last&raquo;</a>
            </li>
            {% endif %}
        </ul>
    </nav>
    {% endif %}
</div>

<div class="container">
    {% if details %}
    <h3>Company Details</h3>
    <div class="row">
        {% for field in details %}
        {% include '_model_detailform.html' %}
        {% endfor %}
    </div>
    {% endif %}
</div>


{% endblock %}

